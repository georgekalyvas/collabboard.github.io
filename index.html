<!DOCTYPE html>
<html lang="en" data-color-scheme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CollabBoard - Advanced Board Meeting Platform</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
</head>
<body>
    <!-- Accessibility controls (color-blind toggle) -->
    <div style="position: fixed; top: 12px; right: 12px; z-index: 2000;">
        <button id="toggle-cb-btn" class="btn btn--outline btn--sm" aria-pressed="false" aria-label="Toggle color-blind friendly mode">CB Mode</button>
    </div>
    <!-- Landing/Create Board Page -->
    <div id="create-page" class="page">
        <div class="container">
            <div class="header">
                <h1>CollabBoard</h1>
                <p>Professional board meeting platform with comprehensive voting options and auto-generated presentations</p>
            </div>
            
            <div class="create-form">
                <div class="card">
                    <div class="card__body">
                        <h3>Create New Board Meeting</h3>
                        <div class="form-group">
                            <label class="form-label" for="creator-name">Your Name</label>
                            <input type="text" id="creator-name" class="form-control" placeholder="Enter your name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="meeting-title">Meeting Title</label>
                            <input type="text" id="meeting-title" class="form-control" placeholder="Q4 Board Meeting" required>
                        </div>
                        <button id="create-board-btn" class="btn btn--primary btn--full-width">Create Board Meeting</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Join Board Page -->
    <div id="join-page" class="page hidden">
        <div class="container">
            <div class="header">
                <h1>Join Board Meeting</h1>
                <p id="meeting-title-display">Meeting Title</p>
            </div>
            
            <div class="join-form">
                <div class="card">
                    <div class="card__body">
                        <h3>Enter Your Name to Join</h3>
                        <div class="form-group">
                            <label class="form-label" for="participant-name">Your Name</label>
                            <input type="text" id="participant-name" class="form-control" placeholder="Enter your name" required>
                        </div>
                        <button id="join-board-btn" class="btn btn--primary btn--full-width">Join Meeting</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Board Meeting Page -->
    <div id="board-page" class="page hidden">
        <div class="container">
            <!-- Header -->
            <div class="board-header">
                <div class="board-title">
                    <h1 id="board-title"></h1>
                    <p id="board-info"></p>
                </div>
                <div class="board-actions">
                    <button id="view-analytics-btn" class="btn btn--secondary">üìä Analytics</button>
                    <button id="view-deck-btn" class="btn btn--secondary">üéØ Presentation</button>
                    <button id="share-btn" class="btn btn--outline">üì§ Share</button>
                    <div class="user-info">
                        <span id="current-user"></span>
                        <span id="user-role" class="status"></span>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-number" id="total-items">0</div>
                    <div class="stat-label">Agenda Items</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="voting-items">0</div>
                    <div class="stat-label">Voting Items</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completed-items">0</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="participation-rate">0%</div>
                    <div class="stat-label">Participation</div>
                </div>
            </div>

            <!-- Participants -->
            <div class="section">
                <h3>Participants (<span id="participant-count">0</span>)</h3>
                <div id="participants-list" class="participants"></div>
            </div>

            <!-- Add Agenda Item (Admin Only) -->
            <div id="admin-section" class="section admin-only">
                <h3>Add Agenda Item</h3>
                <div class="card">
                    <div class="card__body">
                        
                        <!-- Item Type Selection with Categories -->
                        <div class="item-type-selection">
                            <h4>Select Item Type</h4>
                            
                            <!-- Voting Items Category -->
                            <div class="category-section">
                                <h5 class="category-header">‚öñÔ∏è Voting Required Items</h5>
                                <div class="item-type-grid">
                                    <div class="item-type-card" data-type="simple_approval">
                                        <div class="item-type-title">Simple Approval</div>
                                        <div class="item-type-desc">Basic yes/no/abstain vote</div>
                                        <div class="item-type-time">Est. 10 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="weighted_voting">
                                        <div class="item-type-title">Weighted Voting</div>
                                        <div class="item-type-desc">Votes weighted by authority</div>
                                        <div class="item-type-time">Est. 15 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="supermajority">
                                        <div class="item-type-title">Supermajority</div>
                                        <div class="item-type-desc">Requires 66.7% or higher</div>
                                        <div class="item-type-time">Est. 12 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="conditional">
                                        <div class="item-type-title">Conditional Vote</div>
                                        <div class="item-type-desc">Vote with conditions</div>
                                        <div class="item-type-time">Est. 18 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="time_limited">
                                        <div class="item-type-title">Time-Limited Vote</div>
                                        <div class="item-type-desc">Vote with deadline</div>
                                        <div class="item-type-time">Est. 10 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="anonymous">
                                        <div class="item-type-title">Anonymous Vote</div>
                                        <div class="item-type-desc">Secret ballot</div>
                                        <div class="item-type-time">Est. 10 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="proxy">
                                        <div class="item-type-title">Proxy Vote</div>
                                        <div class="item-type-desc">Allow proxy voting</div>
                                        <div class="item-type-time">Est. 15 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="straw_poll">
                                        <div class="item-type-title">Straw Poll</div>
                                        <div class="item-type-desc">Non-binding opinion</div>
                                        <div class="item-type-time">Est. 5 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="priority">
                                        <div class="item-type-title">Priority Ranking</div>
                                        <div class="item-type-desc">Rank by priority</div>
                                        <div class="item-type-time">Est. 20 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="consensus">
                                        <div class="item-type-title">Consensus Building</div>
                                        <div class="item-type-desc">Seek agreement</div>
                                        <div class="item-type-time">Est. 30 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="unanimous">
                                        <div class="item-type-title">Unanimous</div>
                                        <div class="item-type-desc">All must agree</div>
                                        <div class="item-type-time">Est. 25 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="roll_call">
                                        <div class="item-type-title">Roll Call Vote</div>
                                        <div class="item-type-desc">Recorded individual votes</div>
                                        <div class="item-type-time">Est. 15 min</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Non-Voting Items Category -->
                            <div class="category-section">
                                <h5 class="category-header">üìã No Voting Required Items</h5>
                                <div class="item-type-grid">
                                    <div class="item-type-card" data-type="information_only">
                                        <div class="item-type-title">Information Only</div>
                                        <div class="item-type-desc">Share information without voting</div>
                                        <div class="item-type-time">Est. 10 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="discussion_only">
                                        <div class="item-type-title">Discussion Only</div>
                                        <div class="item-type-desc">Open discussion without vote</div>
                                        <div class="item-type-time">Est. 20 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="presentation_only">
                                        <div class="item-type-title">Presentation Only</div>
                                        <div class="item-type-desc">Presentation without voting</div>
                                        <div class="item-type-time">Est. 30 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="update_only">
                                        <div class="item-type-title">Status Update</div>
                                        <div class="item-type-desc">Progress update, no decision</div>
                                        <div class="item-type-time">Est. 15 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="training_only">
                                        <div class="item-type-title">Training Session</div>
                                        <div class="item-type-desc">Educational content</div>
                                        <div class="item-type-time">Est. 45 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="committee_report">
                                        <div class="item-type-title">Committee Report</div>
                                        <div class="item-type-desc">Committee findings report</div>
                                        <div class="item-type-time">Est. 20 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="financial_review">
                                        <div class="item-type-title">Financial Review</div>
                                        <div class="item-type-desc">Financial performance review</div>
                                        <div class="item-type-time">Est. 25 min</div>
                                    </div>
                                    <div class="item-type-card" data-type="strategic_update">
                                        <div class="item-type-title">Strategic Update</div>
                                        <div class="item-type-desc">Strategy progress update</div>
                                        <div class="item-type-time">Est. 30 min</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Selected Type Display -->
                        <div id="selected-type-display" class="selected-type hidden">
                            <h5>Selected Type</h5>
                            <div class="selected-type-info">
                                <span id="selected-type-name"></span>
                                <span id="selected-type-category" class="status"></span>
                            </div>
                            <p id="selected-type-description"></p>
                        </div>

                        <!-- Item Configuration Form -->
                        <div class="form-group">
                            <label class="form-label" for="item-title">Title *</label>
                            <input type="text" id="item-title" class="form-control" placeholder="e.g., Approve Q4 Budget">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="item-description">Description</label>
                            <textarea id="item-description" class="form-control" rows="3" placeholder="Detailed description of the agenda item"></textarea>
                        </div>

                        <!-- Conditional fields based on item type -->
                        <div id="presenter-field" class="form-group hidden">
                            <label class="form-label" for="item-presenter">Presenter</label>
                            <input type="text" id="item-presenter" class="form-control" placeholder="Name of presenter">
                        </div>

                        <div id="voting-threshold-field" class="form-group hidden">
                            <label class="form-label" for="voting-threshold">Voting Threshold</label>
                            <select id="voting-threshold" class="form-control">
                                <option value="simple">Simple Majority (>50%)</option>
                                <option value="supermajority">Supermajority (‚â•66.7%)</option>
                                <option value="three-quarters">Three-Quarters (‚â•75%)</option>
                                <option value="unanimous">Unanimous (100%)</option>
                            </select>
                        </div>

                        <div id="anonymous-option" class="form-group hidden">
                            <label class="form-label">
                                <input type="checkbox" id="allow-anonymous"> Allow anonymous voting
                            </label>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="estimated-time">Estimated Time (minutes)</label>
                            <input type="number" id="estimated-time" class="form-control" placeholder="15" min="1" max="180">
                        </div>

                        <button id="add-item-btn" class="btn btn--primary">Add Agenda Item</button>
                    </div>
                </div>
            </div>

            <!-- Agenda Items with Categories -->
            <div class="section">
                <h3>Agenda Items</h3>
                
                <!-- Voting Items Section -->
                <div id="voting-items-section" class="items-category">
                    <h4 class="category-header">‚öñÔ∏è Voting Required Items</h4>
                    <div id="voting-items-list" class="items-list"></div>
                </div>

                <!-- Non-Voting Items Section -->
                <div id="non-voting-items-section" class="items-category">
                    <h4 class="category-header">üìã No Voting Required Items</h4>
                    <div id="non-voting-items-list" class="items-list"></div>
                </div>

                <!-- Empty State -->
                <div id="items-empty-state" class="empty-state">
                    <h4>No agenda items yet</h4>
                    <p id="empty-state-message">Add agenda items above to get started.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics Dashboard Page -->
    <div id="analytics-page" class="page hidden">
        <div class="container">
            <!-- Analytics Header -->
            <div class="analytics-header">
                <div class="analytics-title">
                    <h1 id="analytics-title">Meeting Analytics</h1>
                    <p id="analytics-info">Real-time meeting insights and metrics</p>
                </div>
                <div class="analytics-actions">
                    <button id="back-to-board-btn" class="btn btn--secondary">‚Üê Back to Board</button>
                    <button id="export-analytics-btn" class="btn btn--outline">üì• Export Data</button>
                </div>
            </div>

            <!-- Analytics Grid -->
            <div class="analytics-grid">
                <!-- Overview Cards -->
                <div class="analytics-section">
                    <h3>Meeting Overview</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="total-duration">0</div>
                            <div class="metric-label">Minutes Elapsed</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="efficiency-score">0%</div>
                            <div class="metric-label">Time Efficiency</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="decisions-made">0</div>
                            <div class="metric-label">Decisions Made</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="consensus-rate">0%</div>
                            <div class="metric-label">Consensus Rate</div>
                        </div>
                    </div>
                </div>

                <!-- Progress Chart -->
                <div class="analytics-section">
                    <h3>Meeting Progress</h3>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="progress-chart"></canvas>
                    </div>
                </div>

                <!-- Participation Chart -->
                <div class="analytics-section">
                    <h3>Participation Analysis</h3>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="participation-chart"></canvas>
                    </div>
                </div>

                <!-- Decision Breakdown -->
                <div class="analytics-section">
                    <h3>Decision Outcomes</h3>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="decisions-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Deck/Presentation Page -->
    <div id="deck-page" class="page hidden">
        <div class="container">
            <!-- Deck Header -->
            <div class="deck-header">
                <div class="deck-title">
                    <h1 id="deck-title"></h1>
                    <p id="deck-info"></p>
                </div>
                <div class="deck-actions">
                    <button id="back-to-board-from-deck-btn" class="btn btn--secondary">‚Üê Back to Board</button>
                    <div class="slide-nav">
                        <button id="prev-slide" class="btn btn--outline">‚Äπ Prev</button>
                        <span id="slide-counter">1 / 1</span>
                        <button id="next-slide" class="btn btn--outline">Next ‚Ä∫</button>
                    </div>
                    <button id="export-deck-btn" class="btn btn--primary">üì• Export PDF</button>
                </div>
            </div>

            <!-- Slide Display -->
            <div class="slide-container">
                <div id="current-slide" class="slide"></div>
            </div>

            <!-- Slide Navigation -->
            <div class="slide-thumbnails">
                <div id="slide-thumbs"></div>
            </div>
        </div>
    </div>

    <!-- Enhanced Share Modal -->
    <div id="share-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Board Meeting</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Share this link with participants:</strong></p>
                <div class="share-link-container">
                    <input type="text" id="share-link" class="form-control" readonly>
                    <button id="copy-link-btn" class="btn btn--secondary">üìã Copy</button>
                </div>
                <div id="copy-success" class="share-feedback hidden">
                    ‚úÖ Link copied to clipboard!
                </div>
                
                <!-- QR Code -->
                <div class="share-section">
                    <h4>QR Code for Mobile</h4>
                    <div id="qr-code" class="qr-code-container"></div>
                </div>

                <!-- Share Options -->
                <div class="share-section">
                    <h4>Share Options</h4>
                    <div class="share-options">
                        <button id="share-email" class="btn btn--outline btn--sm">üìß Email</button>
                        <button id="share-teams" class="btn btn--outline btn--sm">üí¨ Teams</button>
                        <button id="share-slack" class="btn btn--outline btn--sm">üí¨ Slack</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Message -->
    <div id="success-message" class="success-banner hidden">
        <span id="success-text"></span>
        <button id="close-success">&times;</button>
    </div>

    <script src="app.js"></script>
</body>
</html>